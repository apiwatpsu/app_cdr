{% extends "layout.html" %}
{% block title %}Edit User{% endblock %}

{% block content %}
<div class="container mt-4">
  <h3>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
  <form method="POST">
    <div class="mb-3">
      <label class="form-label">Username</label>
      <input type="text" class="form-control" name="username" value="{{ user.username }}" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Role</label>
      <select name="role" class="form-select" required>
        <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>admin</option>
        <option value="viewer" {% if user.role == 'viewer' %}selected{% endif %}>viewer</option>
      </select>
    </div>

  <div class="mb-3">
    <label class="form-label">Menu Permissions</label>
    {% set selected_permissions = user.menu_permissions | from_json %}
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="menu_permissions" value="dashboard"
            {% if 'dashboard' in selected_permissions %}checked{% endif %}>
      <label class="form-check-label">Dashboard</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="menu_permissions" value="report"
            {% if 'report' in selected_permissions %}checked{% endif %}>
      <label class="form-check-label">Report</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="menu_permissions" value="settings"
            {% if 'settings' in selected_permissions %}checked{% endif %}>
      <label class="form-check-label">Settings</label>
    </div>
  </div>



    <button type="submit" class="btn btn-success">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    <a href="{{ url_for('manage_users') }}" class="btn btn-secondary">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</a>
  </form>
</div>
{% endblock %}
