{% extends "layout.html" %}

{% block title %}Ask AI{% endblock %}

{% block content %}
<h1>Ask AI From Knowledge</h1>

<form method="POST" class="bg-white p-4 rounded shadow-sm mb-4">
  <div class="mb-3">
    <label for="keyword" class="form-label">Keyword:</label>
    <input type="text" name="keyword" class="form-control form-control-lg" placeholder="คำค้นใน raw_data" value="{{ keyword }}" required>
  </div>

  <div class="mb-3">
    <label for="systemPrompt" class="form-label">System Prompt:</label>
    <textarea id="systemPrompt" name="system_prompt" rows="8" class="form-control">{{ system_prompt or "คำสั่ง AI" }}</textarea>
  </div>

  <div class="mb-3">
    <label for="userPrompt" class="form-label">User Prompt:</label>
    <textarea id="userPrompt" name="user_prompt" rows="4" class="form-control" required>{{ user_prompt }}</textarea>
  </div>

  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <button type="submit" class="btn btn-success">ถาม</button>
</form>


{% if answer %}
  <hr>
  <h2>Prompt:</h2>
  <pre>{{ prompt }}</pre>

  <h2>AI Answered:</h2>
  <div style="background: #eee; padding: 1em;">{{ answer }}</div>
{% endif %}
{% endblock %}
